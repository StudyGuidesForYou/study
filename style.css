:root{
  --bg: #0b1220;
  --card: #0f1724;
  --muted: #9aa6bb;
  --accent: #5c7cfa;
  --accent-2: #06b6d4;
  --glass: rgba(255,255,255,0.03);
  --radius: 12px;
  --msg-bg: rgba(255,255,255,0.03);
  --shadow: 0 8px 30px rgba(2,6,23,0.6);
}

/* Dark mode is default. theme toggle switches .light on body */
body { margin:0; height:100vh; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial; background: linear-gradient(180deg,var(--bg), #07102a); color:#e6eef8; display:flex; align-items:center; justify-content:center; }

.app { width:94%; max-width:1100px; height:88vh; background: linear-gradient(180deg,var(--card), #071526); border-radius:16px; box-shadow:var(--shadow); display:flex; flex-direction:column; overflow:hidden; }

/* header */
.topbar{ display:flex; align-items:center; justify-content:space-between; padding:16px 20px; gap:12px; border-bottom:1px solid rgba(255,255,255,0.03); }
.brand{ display:flex; gap:12px; align-items:center; }
.logo{ width:48px;height:48px;background:var(--glass);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:22px; }
.title{ font-weight:700; font-size:18px; }
.subtitle{ color:var(--muted); font-size:12px; }

/* controls */
.controls{ display:flex; gap:8px; align-items:center; }
.icon-btn{ background:transparent; border:1px solid rgba(255,255,255,0.04); padding:8px; border-radius:10px; cursor:pointer; color:inherit; }
.small{ background:#ef4444; color:white; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; }

/* main layout */
.chat-area{ display:flex; flex:1; gap:16px; padding:18px; }
.sidebar{ width:260px; min-width:200px; background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(0,0,0,0.06)); border-radius:12px; padding:12px; }
.chat-panel{ flex:1; display:flex; flex-direction:column; gap:12px; }

/* me block */
.me{ display:flex; gap:12px; align-items:center; margin-bottom:8px; }
.avatar{ width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2)); display:flex; align-items:center; justify-content:center; font-weight:700; box-shadow:0 6px 20px rgba(0,0,0,0.5); color:white; }

/* messages */
.messages{ list-style:none; padding:12px; margin:0; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06)); border-radius:12px; flex:1; overflow:auto; display:flex; flex-direction:column; gap:8px; }
.message{ padding:10px 12px; border-radius:10px; background:var(--msg-bg); display:flex; align-items:flex-start; gap:10px; transform-origin:left bottom; animation:pop 220ms ease; }
.message .meta{ font-size:12px; color:var(--muted); margin-bottom:4px; }
.message .text{ white-space:pre-wrap; line-height:1.3; }

/* message right aligned style for "me" */
.message.me { background: linear-gradient(120deg, rgba(92,124,250,0.12), rgba(6,182,212,0.07)); align-self:flex-end; }

/* message actions */
.msg-actions{ margin-left:auto; display:flex; gap:8px; align-items:center; }
.msg-actions button{ background:transparent; border:1px solid rgba(255,255,255,0.04); padding:6px 8px; border-radius:8px; cursor:pointer; color:var(--muted); }

/* composer */
.composer, .composer:focus-within{ display:flex; gap:8px; }
.composer input{ flex:1; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit; }
.composer button{ padding:10px 14px; border-radius:10px; border:none; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:white; font-weight:700; cursor:pointer; }

/* typing indicator */
.typing{ color:var(--muted); font-size:13px; margin-right:8px; min-width:160px; text-align:right; }

/* modal (display name) */
.modal{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(3,7,18,0.6), rgba(0,0,0,0.6)); }
.modal-card{ background:linear-gradient(180deg,#07102a,#0b1220); border-radius:14px; padding:20px; width:92%; max-width:420px; box-shadow:var(--shadow); color: #dfefff; text-align:center; }
.modal input{ width:100%; padding:12px; margin-top:14px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit; }
.modal .row{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:12px; }
.hint{ color:var(--muted); font-size:13px; margin-top:10px; }
.muted{ color:var(--muted); font-size:13px; }

/* animations */
@keyframes pop { from { transform: translateY(8px) scale(0.98); opacity:0 } to { transform:none; opacity:1 } }

/* responsive */
@media (max-width:900px){
  .chat-area{ flex-direction:column; }
  .sidebar{ order:2; width:100%; }
  .chat-panel{ order:1; }
}
