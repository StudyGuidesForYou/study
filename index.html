<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Home</title>
<link rel="icon" href="https://www.gstatic.com/images/branding/product/1x/classroom_48dp.png">
<style>
:root{
  --bg-deep:#040612;
  --bg-mid:#071028;
  --accent-a:#3dd3c7;
  --accent-b:#2b82ff;
  --text:#eaf2ff;
  --muted: rgba(230,235,255,0.48);
  --radius:18px;
  --max-width:1280px;
  --glass: rgba(255,255,255,0.06);
  --glass-strong: rgba(255,255,255,0.12);
  --controls-h:48px;
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
}
html,body{height:100%;width:100%;margin:0;padding:0;background:linear-gradient(180deg,var(--bg-deep),var(--bg-mid));color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;-webkit-font-smoothing:antialiased;overflow:hidden}
/* App host: requestFullscreen on this so topbar stays visible */
#app{height:100vh;width:100%;display:flex;flex-direction:column;align-items:center;box-sizing:border-box;overflow:hidden}
/* Top bar (always above embed, not inside card) */
.top-wrap{position:relative;top:calc(12px + var(--safe-top));z-index:1400;width:min(var(--max-width),96%);display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;background:var(--glass);backdrop-filter:blur(10px) saturate(120%);border:1px solid rgba(255,255,255,0.06);box-shadow:0 12px 36px rgba(2,6,18,0.45);margin:10px 0}
#app.fullscreen .top-wrap{padding:6px 10px;border-radius:10px;transform:none;box-shadow:0 6px 18px rgba(0,0,0,0.55)}
.url-input{flex:1;padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);color:var(--text);font-size:15px;outline:none;min-width:120px}
.url-input::placeholder{color:var(--muted)}
.btn-primary{padding:9px 12px;border-radius:10px;background:linear-gradient(135deg,var(--accent-a),var(--accent-b));border:none;color:white;cursor:pointer;font-weight:700;min-width:64px;text-align:center}
.main-wrap{width:100%;max-width:var(--max-width);padding:14px;display:flex;justify-content:center;align-items:center;box-sizing:border-box;flex:1}
.embed-card-wrap{width:100%;display:flex;justify-content:center}
.embed-card{width:100%;max-width:1100px;height:68vh;border-radius:var(--radius);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.035);box-shadow:0 40px 110px rgba(2,6,18,0.7);display:flex;flex-direction:column;overflow:visible;position:relative;backdrop-filter: blur(8px) saturate(120%)}
.iframe-controls{height:var(--controls-h);display:flex;align-items:center;justify-content:flex-end;gap:8px;padding:6px 10px;border-bottom:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg, rgba(255,255,255,0.006), rgba(255,255,255,0.004))}
.control{padding:8px 12px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.04);color:var(--text);cursor:pointer;font-weight:700}
.embed-iframe{width:100%;height:calc(100% - var(--controls-h));border:0;background:#000;border-radius:0 0 var(--radius) var(--radius);display:block}
.loader-overlay{position:absolute;top:var(--controls-h);left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;z-index:200;pointer-events:none;opacity:0;transition:opacity .18s linear}
.loader-overlay.visible{opacity:1;pointer-events:auto;background:linear-gradient(180deg, rgba(6,10,20,0.22), rgba(6,10,20,0.32));backdrop-filter:blur(6px)}
.loader-spinner{width:48px;height:48px;border:6px solid rgba(255,255,255,0.06);border-top-color:var(--accent-b);border-radius:50%;animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.msg-box{position:absolute;left:50%;top:52%;transform:translate(-50%,-50%);background:rgba(6,10,20,0.8);padding:10px 14px;border-radius:12px;color:var(--muted);display:none;border:1px solid rgba(255,255,255,0.02);z-index:400}
.msg-box.visible{display:block}
.games{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(18px + var(--safe-bottom));z-index:1200;width:min(var(--max-width),96%);display:flex;justify-content:center;padding:8px}
.game-list{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;max-width:1000px;margin:0 auto}
.game-btn{padding:10px 14px;border-radius:999px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.03);color:var(--text);cursor:pointer;font-weight:700;backdrop-filter: blur(6px);transition:all .18s}
.game-btn:hover{transform:translateY(-3px)}
/* mobile */
@media(max-width:900px){html,body{overflow:auto}#app{height:auto}.embed-card{height:58vh;width:96vw;margin:0 auto;border-radius:14px}.main-wrap{padding:10px 8px}.games{position:relative;bottom:0;transform:none;margin-top:12px}.game-list{flex-wrap:nowrap;overflow:auto;padding-bottom:8px;-webkit-overflow-scrolling:touch}.game-btn{flex:0 0 auto}}
/* ensure topbar shadow stands out above card */
.top-wrap{box-shadow:0 12px 40px rgba(2,6,18,0.5)}
:focus{outline:2px solid rgba(100,150,255,0.14);outline-offset:2px}
</style>
</head>
<body>
<div id="app">
  <div id="topBar" class="top-wrap" role="region" aria-label="Top controls">
    <input id="urlInput" class="url-input" placeholder="Enter URL (example: slowroads.io)" aria-label="URL to embed" />
    <button id="loadBtn" class="btn-primary" aria-label="Load URL">Load</button>
  </div>

  <div class="main-wrap" role="main">
    <div class="embed-card-wrap">
      <section id="embedCard" class="embed-card" role="region" aria-label="Embed area">
        <div class="iframe-controls" aria-hidden="false">
          <div style="flex:1"></div>
          <button id="fullscreenBtn" class="control" title="Fullscreen">Fullscreen</button>
          <button id="redirectBtn" class="control" title="Open in new tab">Redirect</button>
        </div>

        <iframe id="embedFrame" class="embed-iframe" src="about:blank"
                sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals"
                allow="fullscreen; autoplay; microphone; camera; encrypted-media"
                title="Embedded content"></iframe>

        <div id="loader" class="loader-overlay" aria-hidden="true"><div class="loader-spinner" role="status" aria-label="Loading"></div></div>
        <div id="msgBox" class="msg-box" role="alert" aria-hidden="true"></div>
      </section>
    </div>
  </div>

  <div class="games" aria-label="Games">
    <div class="game-list" role="list">
      <button class="game-btn" data-url="https://slowroads.io">slowroads.io</button>
      <button class="game-btn" data-url="https://bloxd.io">bloxd.io</button>
      <button class="game-btn" data-url="https://diep.io">diep.io</button>
      <button class="game-btn" data-url="https://sandboxels.r74n.com">sandboxels</button>
      <button class="game-btn" data-url="https://jellymar.io">jellymar.io</button>
      <button class="game-btn" data-url="https://gamesnacks.com">gamesnacks</button>
      <button class="game-btn" data-url="https://adarkroom.doublespeakgames.com">adarkroom</button>
      <button class="game-btn" data-url="https://eaglercraft.com">eaglercraft</button>
      <button class="game-btn" data-url="https://ev.io">ev.io</button>
      <button class="game-btn" data-url="https://play.gidd.io">gidd.io</button>
      <button class="game-btn" data-url="https://html5games.com">html5games</button>
      <button class="game-btn" data-url="https://silvergames.com">SilverGames</button>
      <button class="game-btn" data-url="https://nexus-is.onthewifi.com">Nexus</button>
      <button class="game-btn" data-url="https://zearn.buzz.cdn.cloudflare.net/">Velera</button>
      <button class="game-btn" data-url="https://study.info.north-kazakhstan.su.cdn.cloudflare.net/">DayDreamX</button>
    </div>
  </div>
</div>

<script>
/* Refs */
const app = document.getElementById('app');
const topBar = document.getElementById('topBar');
const urlInput = document.getElementById('urlInput');
const loadBtn = document.getElementById('loadBtn');
const embedCard = document.getElementById('embedCard');
const iframe = document.getElementById('embedFrame');
const loader = document.getElementById('loader');
const msgBox = document.getElementById('msgBox');
const fullscreenBtn = document.getElementById('fullscreenBtn');
const redirectBtn = document.getElementById('redirectBtn');

/* Helpers */
function showLoader(){ loader.classList.add('visible'); loader.setAttribute('aria-hidden','false'); }
function hideLoader(){ loader.classList.remove('visible'); loader.setAttribute('aria-hidden','true'); }
function showMsg(text, timeout=6000){ msgBox.textContent = text; msgBox.classList.add('visible'); msgBox.setAttribute('aria-hidden','false'); clearTimeout(msgBox._hide); if(timeout>0) msgBox._hide = setTimeout(()=>{ msgBox.classList.remove('visible'); msgBox.setAttribute('aria-hidden','true'); }, timeout); }
function normalizeUrl(raw){ if(!raw) return null; raw = raw.trim(); if(!/^https?:\/\//i.test(raw)) raw = 'https://' + raw; try{ return new URL(raw).toString(); }catch(e){ return null; } }

/* Robust load with retries */
let loadTimer = null; const LOAD_TIMEOUT = 14000; let retries = 0; const MAX_RETRIES = 2;
function attemptLoad(raw){ const url = normalizeUrl(raw); if(!url){ showMsg('Invalid URL'); return; } retries = 0; _startLoad(url); }
function _startLoad(url){ showLoader(); iframe.src = url; if(loadTimer) clearTimeout(loadTimer); loadTimer = setTimeout(()=>{
  retries++; hideLoader(); if(retries <= MAX_RETRIES){ showMsg('Retrying...'); iframe.src = url + (url.includes('?')? '&':'?') + 'embed_retry=' + Date.now(); loadTimer = setTimeout(()=> _onLoadGiveUp(url), LOAD_TIMEOUT); } else { _onLoadGiveUp(url); } }, LOAD_TIMEOUT); }
function _onLoadGiveUp(url){ hideLoader(); showMsg('Site may block framing. Use Redirect to open directly.',9000); console.warn('Embed gave up loading', url); }

/* Hide loader on successful load */
iframe.addEventListener('load', ()=>{ if(loadTimer){ clearTimeout(loadTimer); loadTimer = null; } hideLoader(); // intentionally removed 'looks empty' message per request });
iframe.addEventListener('error', ()=>{ if(loadTimer){ clearTimeout(loadTimer); loadTimer=null; } hideLoader(); showMsg('Failed to load embedded content. Try Redirect.',7000); });

/* UI wiring */
loadBtn.addEventListener('click', ()=> attemptLoad(urlInput.value)); urlInput.addEventListener('keydown', e=>{ if(e.key === 'Enter') attemptLoad(urlInput.value); });
document.querySelectorAll('.game-btn').forEach(b=> b.addEventListener('click', ()=>{ urlInput.value = b.dataset.url; attemptLoad(b.dataset.url); }));
redirectBtn.addEventListener('click', ()=>{ const src = iframe.src; if(src && src !== 'about:blank') window.open(src,'_blank'); else showMsg('No embed loaded',3000); });

/* Fullscreen behavior: request fullscreen on #app so topbar remains visible and not clipped. Toggle works. */
fullscreenBtn.addEventListener('click', async ()=>{
  try{
    if(document.fullscreenElement){ await document.exitFullscreen(); return; }
    await app.requestFullscreen();
  }catch(err){ showMsg('Fullscreen blocked by browser.',3000); }
});

document.addEventListener('fullscreenchange', ()=>{
  const isFS = !!document.fullscreenElement;
  app.classList.toggle('fullscreen', isFS);
  fullscreenBtn.textContent = isFS ? 'Exit Fullscreen' : 'Fullscreen';
});

/* Hardcode centering guard: if embed-card is moved (rare), force center on desktop widths. */
function enforceCenter(){
  try{
    if(window.innerWidth > 900){
      const rect = embedCard.getBoundingClientRect();
      const centerX = (window.innerWidth - rect.width)/2;
      const currentLeft = rect.left;
      // if more than 6px off center, force center via margin auto (flexbox) and translate reset
      if(Math.abs(currentLeft - centerX) > 6){
        embedCard.style.margin = '0 auto';
      }
    } else {
      embedCard.style.margin = '';
    }
  }catch(e){/* ignore */}
}
window.addEventListener('resize', enforceCenter);
setInterval(enforceCenter, 900);
// run immediately
setTimeout(enforceCenter, 250);

/* Mobile niceties: when input focused, scroll embed into view */
urlInput.addEventListener('focus', ()=>{ setTimeout(()=>{ const rect = embedCard.getBoundingClientRect(); window.scrollTo({ top: Math.max(0, rect.top - 80), behavior: 'smooth' }); }, 300); });

/* Prevent accidental navigation in embed breaking topbar: if embed navigates top-level, restore it */
window.addEventListener('message', (e)=>{ /* placeholder for future messaging between host & iframe */ }, false);

/* Performance note: no heavy intervals except tiny enforceCenter interval */
</script>
</body>
</html>
